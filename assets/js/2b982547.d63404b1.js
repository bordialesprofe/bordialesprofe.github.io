"use strict";(self.webpackChunkbegordiales=self.webpackChunkbegordiales||[]).push([[3540],{4168:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"di/UT9/9.4","title":"9.4 Firma digital en Android","description":"Para poder distribuir una aplicaci\xf3n Android en modo release, es obligatorio firmarla digitalmente.","source":"@site/docs/di/UT9/9.4.md","sourceDirName":"di/UT9","slug":"/di/UT9/9.4","permalink":"/docs/di/UT9/9.4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"position":4,"title":"9.4 Firma digital en Android"},"sidebar":"diSidebar","previous":{"title":"9.3 Generaci\xf3n de paquetes Android","permalink":"/docs/di/UT9/9.3"},"next":{"title":"9.5 Distribuci\xf3n Web","permalink":"/docs/di/UT9/9.5"}}');var n=i(4848),s=i(8453);const l={position:4,title:"9.4 Firma digital en Android"},o=void 0,d={},c=[{value:"1\ufe0f\u20e3 Crear la clave de firma (keystore)",id:"1\ufe0f\u20e3-crear-la-clave-de-firma-keystore",level:2},{value:"2\ufe0f\u20e3 Configurar las credenciales de firma",id:"2\ufe0f\u20e3-configurar-las-credenciales-de-firma",level:2},{value:"3\ufe0f\u20e3 Vincular la firma al proceso de compilaci\xf3n",id:"3\ufe0f\u20e3-vincular-la-firma-al-proceso-de-compilaci\xf3n",level:2},{value:"4\ufe0f\u20e3 Generar el AAB firmado",id:"4\ufe0f\u20e3-generar-el-aab-firmado",level:2}];function t(e){const r={admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:["Para poder distribuir una aplicaci\xf3n Android en modo ",(0,n.jsx)(r.em,{children:"release"}),", es obligatorio firmarla digitalmente."]}),"\n",(0,n.jsx)(r.p,{children:"La firma:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Identifica al desarrollador."}),"\n",(0,n.jsx)(r.li,{children:"Garantiza que el archivo no ha sido modificado."}),"\n",(0,n.jsx)(r.li,{children:"Permite publicar futuras actualizaciones."}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"El proceso completo se puede resumir en cuatro fases."}),"\n",(0,n.jsx)(r.h2,{id:"1\ufe0f\u20e3-crear-la-clave-de-firma-keystore",children:"1\ufe0f\u20e3 Crear la clave de firma (keystore)"}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 1 Ejecutar el comando desde la ra\xedz del proyecto"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"keytool -genkey -v -keystore salon_heroes.keystore -keyalg RSA -keysize 2048 -validity 10000 -alias salonheroes\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 2 Introducir los datos solicitados"}),"\nDurante el proceso se pedir\xe1n datos como:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Nombre (CN)"}),"\n",(0,n.jsx)(r.li,{children:"Unidad organizativa (OU)"}),"\n",(0,n.jsx)(r.li,{children:"Organizaci\xf3n (O)"}),"\n",(0,n.jsx)(r.li,{children:"Ciudad (L)"}),"\n",(0,n.jsx)(r.li,{children:"Provincia (ST)"}),"\n",(0,n.jsx)(r.li,{children:"Pa\xeds (C)"}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Estos datos forman parte del certificado digital."}),"\n",(0,n.jsx)("img",{src:"/img/DI/UT9/keystore.jpg",alt:"Crear clave de firma",className:"imagen-centrada imagen-captura"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 3\ufe0f\u20e3 Guardar el archivo generado"}),"\nMover el archivo a:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"android/app/salon_heroes.keystore\n"})}),"\n",(0,n.jsx)(r.h2,{id:"2\ufe0f\u20e3-configurar-las-credenciales-de-firma",children:"2\ufe0f\u20e3 Configurar las credenciales de firma"}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 1 Crear el archivo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"android/key.properties\n"})}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 2 A\xf1adir las credenciales"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"storePassword=TU_PASSWORD\nkeyPassword=TU_PASSWORD\nkeyAlias=salonheroes\nstoreFile=salon_heroes.keystore\n"})}),"\n",(0,n.jsxs)(r.p,{children:["En este caso, ",(0,n.jsx)(r.code,{children:"storeFile"})," funciona relativo a ",(0,n.jsx)(r.code,{children:"android/app/"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"3\ufe0f\u20e3-vincular-la-firma-al-proceso-de-compilaci\xf3n",children:"3\ufe0f\u20e3 Vincular la firma al proceso de compilaci\xf3n"}),"\n",(0,n.jsx)(r.p,{children:"Archivo:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"android/app/build.gradle.kts\n"})}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 1 Cargar key.properties"}),"\n",(0,n.jsxs)(r.p,{children:["A\xf1adir antes del bloque ",(0,n.jsx)(r.code,{children:"android { ... }"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:'import java.util.Properties\nimport java.io.FileInputStream\n\nval keystoreProperties = Properties()\nval keystorePropertiesFile = rootProject.file("key.properties")\nif (keystorePropertiesFile.exists()) {\n    keystoreProperties.load(FileInputStream(keystorePropertiesFile))\n}\n'})}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 2 Crear la configuraci\xf3n de firma"}),"\n",(0,n.jsxs)(r.p,{children:["Dentro de ",(0,n.jsx)(r.code,{children:"android { ... }"}),", antes de buildTypes:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:'signingConfigs {\n    create("release") {\n        keyAlias = keystoreProperties["keyAlias"] as String\n        keyPassword = keystoreProperties["keyPassword"] as String\n        storeFile = file(keystoreProperties["storeFile"] as String)\n        storePassword = keystoreProperties["storePassword"] as String\n    }\n}\n'})}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 3 Asignar la firma al build release"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:'buildTypes {\n    getByName("release") {\n        signingConfig = signingConfigs.getByName("release")\n        isMinifyEnabled = false\n        isShrinkResources = false\n    }\n}\n'})}),"\n",(0,n.jsx)("img",{src:"/img/DI/UT9/VincularFirma.jpg",alt:"Vincular la firma al proceso de compilaci\xf3n",className:"imagen-centrada imagen-captura"}),"\n",(0,n.jsx)("p",{style:{textAlign:"center",fontSize:"0.9rem",color:"#585858"},children:(0,n.jsx)(r.p,{children:"Gradle configurado para firmar el build release con la keystore personalizada"})}),"\n",(0,n.jsx)(r.admonition,{title:"\xbfQu\xe9 se ha hecho en Gradle?",type:"info",children:(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Se carga ",(0,n.jsx)(r.code,{children:"key.properties"})," para leer contrase\xf1as y rutas."]}),"\n",(0,n.jsx)(r.li,{children:"Se crea una configuraci\xf3n de firma llamada release."}),"\n",(0,n.jsx)(r.li,{children:"Se asigna esa firma al tipo de build release."}),"\n"]})}),"\n",(0,n.jsx)(r.h2,{id:"4\ufe0f\u20e3-generar-el-aab-firmado",children:"4\ufe0f\u20e3 Generar el AAB firmado"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 1 Construir el App Bundle en modo release"}),"\nSe vuelve a ejecutar ",(0,n.jsx)(r.code,{children:"flutter build appbundle --release"})," para verificar que la firma release est\xe1 bien configurada y que el AAB se genera correctamente."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"flutter build appbundle --release\n"})}),"\n",(0,n.jsx)("h4",{className:"paso-titulo",children:"\ud83d\udd36 Paso 2 Verificar el archivo generado"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"build/app/outputs/bundle/release/app-release.aab\n"})}),"\n",(0,n.jsx)(r.p,{children:"Si la configuraci\xf3n es correcta, el archivo se genera firmado y listo para distribuci\xf3n."}),"\n",(0,n.jsx)(r.admonition,{title:"Errores frecuentes con la firma",type:"warning",children:(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Error: SigningConfig with name 'release' not found"}),"\nCausa: ",(0,n.jsx)(r.code,{children:"buildTypes"})," intenta usar la firma antes de que exista.\nSoluci\xf3n: colocar ",(0,n.jsx)(r.code,{children:"signingConfigs"})," antes de ",(0,n.jsx)(r.code,{children:"buildTypes"})," dentro de ",(0,n.jsx)(r.code,{children:"android {}"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Error: Keystore file ... not found"}),"\nCausa: la ruta de ",(0,n.jsx)(r.code,{children:"storeFile"})," no coincide con la ubicaci\xf3n real.\nSoluci\xf3n: si la keystore est\xe1 en ",(0,n.jsx)(r.code,{children:"android/app/"}),", usar:\nstoreFile=",(0,n.jsx)(r.code,{children:"salon_heroes.keystore"}),"\nEvitar ",(0,n.jsx)(r.code,{children:"app/salon_heroes.keystore"})," si ya est\xe1 dentro de app, porque buscar\xeda ",(0,n.jsx)(r.code,{children:"android/app/app/..."}),"."]}),"\n"]})}),"\n",(0,n.jsx)("img",{src:"/img/DI/UT9/ProcesoFirmaDigitalAndroid.png",alt:"Proceso de firma digital en Android",className:"imagen-centrada",style:{width:"60%",height:"auto",borderRadius:"8px"}}),"\n",(0,n.jsx)("p",{style:{textAlign:"center",fontSize:"0.9rem",color:"#585858"},children:(0,n.jsx)(r.p,{children:"Proceso de firma digital en Android"})})]})}function p(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>l,x:()=>o});var a=i(6540);const n={},s=a.createContext(n);function l(e){const r=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),a.createElement(s.Provider,{value:r},e.children)}}}]);