"use strict";(self.webpackChunkbegordiales=self.webpackChunkbegordiales||[]).push([[297],{3841:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"dwec/UT8/8.2/8.2.5","title":"8.2.5 Configuraci\xf3n y gesti\xf3n avanzada de listeners","description":"Adem\xe1s de indicar el tipo de evento y la funci\xf3n que se ejecutar\xe1, los listeners pueden configurarse para modificar su comportamiento. Tambi\xe9n es posible eliminarlos cuando ya no son necesarios. Estas opciones permiten un control m\xe1s preciso en aplicaciones web interactivas.","source":"@site/docs/dwec/UT8/8.2/8.2.5.md","sourceDirName":"dwec/UT8/8.2","slug":"/dwec/UT8/8.2/8.2.5","permalink":"/docs/dwec/UT8/8.2/8.2.5","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"position":5,"title":"8.2.5 Configuraci\xf3n y gesti\xf3n avanzada de listeners"},"sidebar":"dwecSidebar","previous":{"title":"8.2.4 Propagaci\xf3n, captura/burbujeo y delegaci\xf3n de eventos","permalink":"/docs/dwec/UT8/8.2/8.2.4"},"next":{"title":"8.2.6 this vs funciones flecha en eventos","permalink":"/docs/dwec/UT8/8.2/8.2.6"}}');var r=a(4848),s=a(8453),i=a(5537),l=a(9329);const o={position:5,title:"8.2.5 Configuraci\xf3n y gesti\xf3n avanzada de listeners"},c=void 0,u={},d=[{value:"1\ufe0f\u20e3 Ejecutar el listener solo una vez",id:"1\ufe0f\u20e3-ejecutar-el-listener-solo-una-vez",level:2},{value:"2\ufe0f\u20e3 Escuchar en fase de captura",id:"2\ufe0f\u20e3-escuchar-en-fase-de-captura",level:2},{value:"3\ufe0f\u20e3 Mejorar el rendimiento en eventos de desplazamiento",id:"3\ufe0f\u20e3-mejorar-el-rendimiento-en-eventos-de-desplazamiento",level:2},{value:"4\ufe0f\u20e3 Eliminar un listener cuando ya no es necesario",id:"4\ufe0f\u20e3-eliminar-un-listener-cuando-ya-no-es-necesario",level:2}];function m(e){const n={admonition:"admonition",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Adem\xe1s de indicar el tipo de evento y la funci\xf3n que se ejecutar\xe1, los listeners pueden configurarse para modificar su comportamiento. Tambi\xe9n es posible eliminarlos cuando ya no son necesarios. Estas opciones permiten un control m\xe1s preciso en aplicaciones web interactivas."}),"\n",(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-ejecutar-el-listener-solo-una-vez",children:"1\ufe0f\u20e3 Ejecutar el listener solo una vez"}),"\n",(0,r.jsx)(n.p,{children:"En algunos casos interesa que un listener se ejecute una \xfanica vez (por ejemplo, un aviso inicial o una confirmaci\xf3n). Para ello se puede configurar el listener para que se elimine autom\xe1ticamente tras su primera ejecuci\xf3n."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Sintaxis"',children:'elemento.addEventListener("evento", funcion, { once: true })\n'})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(l.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button id="btn-once">Mostrar mensaje</button> \n'})})}),(0,r.jsxs)(l.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'const boton = document.querySelector("#btn-once");',children:'\nboton.addEventListener(\n    "click",\n    () => {\n        alert("Este mensaje solo aparece una vez");\n    },\n    { once: true }\n);\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsx)(n.p,{children:"El listener se ejecuta en el primer clic y despu\xe9s se elimina autom\xe1ticamente."})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-escuchar-en-fase-de-captura",children:"2\ufe0f\u20e3 Escuchar en fase de captura"}),"\n",(0,r.jsx)(n.p,{children:"Por defecto, los eventos se ejecutan en fase de burbujeo. Sin embargo, se puede configurar un listener para que act\xfae en la fase de captura, es decir, antes de que el evento llegue al elemento objetivo."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Sintaxis"',children:'elemento.addEventListener("evento", funcion, { capture: true })\n'})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(l.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<article class="tarjeta" id="tarjeta"> \n    <button id="btn-capture">Pulsar</button> \n</article> \n'})})}),(0,r.jsxs)(l.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const tarjeta = document.querySelector("#tarjeta"); \nconst boton = document.querySelector("#btn-capture");\n\ntarjeta.addEventListener(\n    "click",\n    () => {\n        console.log("Listener en fase de captura (tarjeta)");\n    },\n    { capture: true }\n);\n\nboton.addEventListener("click", () => {\n    console.log("Listener en el bot\xf3n");\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsx)(n.p,{children:"Con la configuraci\xf3n de captura activada, el listener de la tarjeta se ejecuta antes que el del bot\xf3n."})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-mejorar-el-rendimiento-en-eventos-de-desplazamiento",children:"3\ufe0f\u20e3 Mejorar el rendimiento en eventos de desplazamiento"}),"\n",(0,r.jsxs)(n.p,{children:["En eventos como ",(0,r.jsx)(n.code,{children:"scroll"})," o ",(0,r.jsx)(n.code,{children:"touch"}),", se puede indicar que el listener no va a cancelar el comportamiento por defecto. Esto permite que el navegador optimice el rendimiento del desplazamiento."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Sintaxis"',children:'elemento.addEventListener("evento", funcion, { passive: true })\n'})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(l.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<p id="estado-scroll">Despl\xe1zate por la p\xe1gina</p> \n'})})}),(0,r.jsxs)(l.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const estado = document.querySelector("#estado-scroll");\n\nwindow.addEventListener(\n    "scroll",\n    () => {\n        estado.textContent = "Scroll detectado";\n    },\n    { passive: true }\n);\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsxs)(n.p,{children:["Se indica que el evento no ser\xe1 cancelado con ",(0,r.jsx)(n.code,{children:"preventDefault()"}),", lo que ayuda a que el desplazamiento sea m\xe1s fluido."]})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"4\ufe0f\u20e3-eliminar-un-listener-cuando-ya-no-es-necesario",children:"4\ufe0f\u20e3 Eliminar un listener cuando ya no es necesario"}),"\n",(0,r.jsxs)(n.p,{children:["En determinadas situaciones puede ser necesario eliminar un listener para evitar duplicidades o comportamientos no deseados. Para ello se utiliza ",(0,r.jsx)(n.code,{children:"removeEventListener()"}),". Es importante que la funci\xf3n utilizada tenga nombre, ya que debe pasarse exactamente la misma referencia."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Sintaxis"',children:'elemento.removeEventListener("evento", funcion)\n'})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(l.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button id="btn-activar">Activar</button> \n<button id="btn-desactivar">Desactivar</button> \n'})})}),(0,r.jsxs)(l.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const activar = document.querySelector("#btn-activar"); \nconst desactivar = document.querySelector("#btn-desactivar");\n\nfunction mostrarMensaje() {\n    alert("Listener activo");\n}\n\nactivar.addEventListener("click", () => {\n    document.addEventListener("click", mostrarMensaje);\n});\n\ndesactivar.addEventListener("click", () => {\n    document.removeEventListener("click", mostrarMensaje);\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsx)(n.p,{children:"Se a\xf1ade un listener al documento al pulsar \u201cActivar\u201d y se elimina al pulsar \u201cDesactivar\u201d, utilizando la misma funci\xf3n con nombre."})})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Idea clave",type:"tip",children:(0,r.jsx)(n.p,{children:"Los listeners pueden configurarse para ejecutarse una sola vez, actuar en fase de captura o mejorar el rendimiento en determinados eventos. Adem\xe1s, es posible eliminarlos cuando ya no se necesitan para mantener el control del comportamiento de la aplicaci\xf3n."})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},5537:(e,n,a)=>{a.d(n,{A:()=>E});var t=a(6540),r=a(4164),s=a(5627),i=a(6347),l=a(372),o=a(604),c=a(1861),u=a(8749);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:r}}=e;return{value:n,label:a,attributes:t,default:r}}))}(a);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function h(e){let{queryString:n=!1,groupId:a}=e;const r=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function v(e){const{defaultValue:n,queryString:a=!1,groupId:r}=e,s=m(e),[i,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,d]=h({queryString:a,groupId:r}),[v,j]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,u.Dv)(a);return[r,(0,t.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:r}),f=(()=>{const e=c??v;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{f&&o(f)}),[f]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),j(e)}),[d,j,s]),tabValues:s}}var j=a(9136);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=a(4848);function x(e){let{className:n,block:a,selectedValue:t,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const n=e.currentTarget,a=o.indexOf(n),r=l[a].value;r!==t&&(c(n),i(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":a},n),children:l.map((e=>{let{value:n,label:a,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{o.push(e)},onKeyDown:d,onClick:u,...s,className:(0,r.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function g(e){let{lazy:n,children:a,selectedValue:s}=e;const i=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=v(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,b.jsx)(x,{...n,...e}),(0,b.jsx)(g,{...n,...e})]})}function E(e){const n=(0,j.A)();return(0,b.jsx)(y,{...e,children:d(e.children)},String(n))}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>l});var t=a(6540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}},9329:(e,n,a)=>{a.d(n,{A:()=>i});a(6540);var t=a(4164);const r={tabItem:"tabItem_Ymn6"};var s=a(4848);function i(e){let{children:n,hidden:a,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,i),hidden:a,children:n})}}}]);