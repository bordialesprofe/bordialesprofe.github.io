"use strict";(self.webpackChunkbegordiales=self.webpackChunkbegordiales||[]).push([[5167],{3518:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>m,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"dwec/UT8/8.2/8.2.4","title":"8.2.4 Propagaci\xf3n, captura/burbujeo y delegaci\xf3n de eventos","description":"Cuando ocurre un evento en un elemento, ese evento no se queda solo en ese punto. En el DOM, los eventos suelen propagarse por la jerarqu\xeda de elementos. Esto explica por qu\xe9 un clic en un bot\xf3n puede \u201cllegar\u201d tambi\xe9n a su tarjeta contenedora.","source":"@site/docs/dwec/UT8/8.2/8.2.4.md","sourceDirName":"dwec/UT8/8.2","slug":"/dwec/UT8/8.2/8.2.4","permalink":"/docs/dwec/UT8/8.2/8.2.4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"position":4,"title":"8.2.4 Propagaci\xf3n, captura/burbujeo y delegaci\xf3n de eventos"},"sidebar":"dwecSidebar","previous":{"title":"8.2.3 Objeto Event","permalink":"/docs/dwec/UT8/8.2/8.2.3"},"next":{"title":"8.2.5 Configuraci\xf3n y gesti\xf3n avanzada de listeners","permalink":"/docs/dwec/UT8/8.2/8.2.5"}}');var r=t(4848),o=t(8453),l=t(5537),s=t(9329);const c={position:4,title:"8.2.4 Propagaci\xf3n, captura/burbujeo y delegaci\xf3n de eventos"},i=void 0,u={},d=[{value:"1\ufe0f\u20e3 Propagaci\xf3n: qu\xe9 ocurre cuando se dispara un evento",id:"1\ufe0f\u20e3-propagaci\xf3n-qu\xe9-ocurre-cuando-se-dispara-un-evento",level:2},{value:"2\ufe0f\u20e3 Burbujeo (bubbling): el comportamiento por defecto",id:"2\ufe0f\u20e3-burbujeo-bubbling-el-comportamiento-por-defecto",level:2},{value:"3\ufe0f\u20e3 Captura (capturing): escuchar antes de que llegue al objetivo",id:"3\ufe0f\u20e3-captura-capturing-escuchar-antes-de-que-llegue-al-objetivo",level:2},{value:"4\ufe0f\u20e3 Detener la propagaci\xf3n con <code>stopPropagation()</code>",id:"4\ufe0f\u20e3-detener-la-propagaci\xf3n-con-stoppropagation",level:2},{value:"5\ufe0f\u20e3 Delegaci\xf3n de eventos: un listener para muchos elementos",id:"5\ufe0f\u20e3-delegaci\xf3n-de-eventos-un-listener-para-muchos-elementos",level:2}];function p(e){const n={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Cuando ocurre un evento en un elemento, ese evento no se queda solo en ese punto. En el DOM, los eventos suelen propagarse por la jerarqu\xeda de elementos. Esto explica por qu\xe9 un clic en un bot\xf3n puede \u201cllegar\u201d tambi\xe9n a su tarjeta contenedora."}),"\n",(0,r.jsx)(n.p,{children:"Entender la propagaci\xf3n permite evitar comportamientos inesperados y aplicar t\xe9cnicas muy \xfatiles como la delegaci\xf3n de eventos, especialmente cuando se crean elementos din\xe1micamente."}),"\n",(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-propagaci\xf3n-qu\xe9-ocurre-cuando-se-dispara-un-evento",children:"1\ufe0f\u20e3 Propagaci\xf3n: qu\xe9 ocurre cuando se dispara un evento"}),"\n",(0,r.jsx)(n.p,{children:"Al hacer clic en un elemento que est\xe1 dentro de otro, el evento puede afectar a varios niveles. Por defecto, el comportamiento habitual es que el evento se origine en el elemento interno y despu\xe9s vaya subiendo por sus contenedores."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Idea"',children:"Elemento interno \u2192 contenedor \u2192 ... \u2192 document\n"})}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<article class="tarjeta" id="tarjeta"> \n  <button id="btn">Pulsar</button> \n</article> \n'})})}),(0,r.jsxs)(s.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const tarjeta = document.querySelector("#tarjeta"); \nconst boton = document.querySelector("#btn");\n\nboton.addEventListener("click", () => {\n  console.log("Click en el bot\xf3n");\n});\n\ntarjeta.addEventListener("click", () => {\n  console.log("Click en la tarjeta");\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsx)(n.p,{children:"Si se pulsa el bot\xf3n, se ejecuta tambi\xe9n el listener de la tarjeta porque el evento se propaga hacia arriba."})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-burbujeo-bubbling-el-comportamiento-por-defecto",children:"2\ufe0f\u20e3 Burbujeo (bubbling): el comportamiento por defecto"}),"\n",(0,r.jsx)(n.p,{children:"El burbujeo significa que el evento sube desde el elemento donde ocurre hacia sus padres. Es el modo m\xe1s com\xfan y el que se aprovecha para delegaci\xf3n de eventos."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Idea"',children:"target \u2192 padre \u2192 abuelo \u2192 ... \u2192 document\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Idea clave",type:"tip",children:(0,r.jsx)(n.p,{children:"La mayor\xeda de eventos en el DOM burbujean por defecto. Por eso, un clic \u201csube\u201d a contenedores superiores."})}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-captura-capturing-escuchar-antes-de-que-llegue-al-objetivo",children:"3\ufe0f\u20e3 Captura (capturing): escuchar antes de que llegue al objetivo"}),"\n",(0,r.jsxs)(n.p,{children:["La captura es la fase contraria: el evento baja desde arriba hacia el elemento objetivo. No es el modo habitual, pero se puede activar con la opci\xf3n ",(0,r.jsx)(n.code,{children:"capture: true"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Idea"',children:"document \u2192 ... \u2192 padre \u2192 target\n"})}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<article class="tarjeta" id="tarjeta"> \n  <button id="btn">Pulsar</button> \n</article> \n'})})}),(0,r.jsxs)(s.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const tarjeta = document.querySelector("#tarjeta"); \nconst boton = document.querySelector("#btn");\n\ntarjeta.addEventListener(\n  "click",\n  () => {console.log("Captura en la tarjeta");},\n  { capture: true }\n);\n\nboton.addEventListener("click", () => {\n  console.log("Click en el bot\xf3n");\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsxs)(n.p,{children:["Con ",(0,r.jsx)(n.code,{children:"capture: true"}),", el listener de la tarjeta se ejecuta en la fase de captura, antes del listener del bot\xf3n."]})})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"4\ufe0f\u20e3-detener-la-propagaci\xf3n-con-stoppropagation",children:["4\ufe0f\u20e3 Detener la propagaci\xf3n con ",(0,r.jsx)(n.code,{children:"stopPropagation()"})]}),"\n",(0,r.jsxs)(n.p,{children:["Si no interesa que el evento siga subiendo a otros contenedores, se puede detener la propagaci\xf3n con ",(0,r.jsx)(n.code,{children:"stopPropagation()"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Sintaxis"',children:"event.stopPropagation()\n"})}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<article class="tarjeta" id="tarjeta"> \n  <button id="btn">Pulsar</button> \n</article> \n'})})}),(0,r.jsxs)(s.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const tarjeta = document.querySelector("#tarjeta"); \nconst boton = document.querySelector("#btn");\n\ntarjeta.addEventListener("click", () => {\n  console.log("Click en la tarjeta");\n});\n\nboton.addEventListener("click", (e) => {\n  e.stopPropagation();\n  console.log("Click en el bot\xf3n (sin burbujeo)");\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsx)(n.p,{children:"Al pulsar el bot\xf3n, se detiene el evento y no se ejecuta el listener de la tarjeta."})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"5\ufe0f\u20e3-delegaci\xf3n-de-eventos-un-listener-para-muchos-elementos",children:"5\ufe0f\u20e3 Delegaci\xf3n de eventos: un listener para muchos elementos"}),"\n",(0,r.jsxs)(n.p,{children:["La delegaci\xf3n consiste en colocar un \xfanico listener en un contenedor com\xfan y, desde ah\xed, detectar qu\xe9 elemento concreto se ha pulsado usando ",(0,r.jsx)(n.code,{children:"event.target"}),". Es muy \xfatil cuando hay muchas tarjetas o cuando se generan din\xe1micamente."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="Idea"',children:"Listener en el contenedor + comprobar event.target\n"})}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(s.A,{value:"html",label:"HTML",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<section id="lista-avisos"> \n  <article class="tarjeta"> \n    <button class="btn-eliminar">Eliminar</button> \n  </article> \n  <article class="tarjeta"> \n    <button class="btn-eliminar">Eliminar</button> \n  </article> \n</section> \n'})})}),(0,r.jsxs)(s.A,{value:"js",label:"JavaScript",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const lista = document.querySelector("#lista-avisos");\n\nlista.addEventListener("click", (e) => {\n  if (e.target.classList.contains("btn-eliminar")) {\n    const tarjeta = e.target.closest(".tarjeta");\n    tarjeta.remove();\n  }\n});\n'})}),(0,r.jsx)(n.admonition,{type:"explicacion",children:(0,r.jsxs)(n.p,{children:["Con un solo listener en ",(0,r.jsx)(n.code,{children:"#lista-avisos"}),", se detecta qu\xe9 bot\xf3n se ha pulsado y se elimina la tarjeta correspondiente."]})})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Cu\xe1ndo usar delegaci\xf3n",type:"tip",children:(0,r.jsxs)(n.p,{children:["Es especialmente \xfatil cuando hay muchos elementos repetidos (tarjetas, filas) o cuando se crean con ",(0,r.jsx)(n.code,{children:"createElement()"})," y renderizado desde datos."]})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},5537:(e,n,t)=>{t.d(n,{A:()=>q});var a=t(6540),r=t(4164),o=t(5627),l=t(6347),s=t(372),c=t(604),i=t(1861),u=t(8749);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}(t);return function(e){const n=(0,i.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function h(e){let{queryString:n=!1,groupId:t}=e;const r=(0,l.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(o),(0,a.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(r.location.search);n.set(o,e),r.replace({...r.location,search:n.toString()})}),[o,r])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,o=p(e),[l,c]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[i,d]=h({queryString:t,groupId:r}),[b,j]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,o]=(0,u.Dv)(t);return[r,(0,a.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:r}),g=(()=>{const e=i??b;return m({value:e,tabValues:o})?e:null})();(0,s.A)((()=>{g&&c(g)}),[g]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),j(e)}),[d,j,o]),tabValues:o}}var j=t(9136);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(4848);function x(e){let{className:n,block:t,selectedValue:a,selectValue:l,tabValues:s}=e;const c=[],{blockElementScrollPositionUntilNextRender:i}=(0,o.a_)(),u=e=>{const n=e.currentTarget,t=c.indexOf(n),r=s[t].value;r!==a&&(i(n),l(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:s.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>{c.push(e)},onKeyDown:d,onClick:u,...o,className:(0,r.A)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function f(e){let{lazy:n,children:t,selectedValue:o}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function y(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,v.jsx)(x,{...n,...e}),(0,v.jsx)(f,{...n,...e})]})}function q(e){const n=(0,j.A)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var a=t(6540);const r={},o=a.createContext(r);function l(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(o.Provider,{value:n},e.children)}},9329:(e,n,t)=>{t.d(n,{A:()=>l});t(6540);var a=t(4164);const r={tabItem:"tabItem_Ymn6"};var o=t(4848);function l(e){let{children:n,hidden:t,className:l}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,l),hidden:t,children:n})}}}]);