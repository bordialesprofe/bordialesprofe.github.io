"use strict";(self.webpackChunkbegordiales=self.webpackChunkbegordiales||[]).push([[7268],{1223:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"di/UT8/8.2/8.2.2","title":"8.2.2 Separar los datos y el modelo","description":"Hasta ahora la pantalla contiene demasiada informaci\xf3n","source":"@site/docs/di/UT8/8.2/8.2.2.md","sourceDirName":"di/UT8/8.2","slug":"/di/UT8/8.2/8.2.2","permalink":"/docs/di/UT8/8.2/8.2.2","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"position":2,"title":"8.2.2 Separar los datos y el modelo"},"sidebar":"diSidebar","previous":{"title":"8.2.1 Separar la pantalla principal","permalink":"/docs/di/UT8/8.2/8.2.1"},"next":{"title":"8.3 Componentes reutilizables y estilos compartidos","permalink":"/docs/di/UT8/8.3/"}}');var o=a(4848),t=a(8453),s=a(5537),l=a(9329);const i={position:2,title:"8.2.2 Separar los datos y el modelo"},d=void 0,c={},u=[{value:"1\ufe0f\u20e3 Crear el modelo (<code>models/</code>)",id:"1\ufe0f\u20e3-crear-el-modelo-models",level:3},{value:"2\ufe0f\u20e3 Crear el archivo de datos (<code>data/</code>)",id:"2\ufe0f\u20e3-crear-el-archivo-de-datos-data",level:3},{value:"3\ufe0f\u20e3 Actualizar la pantalla para usar los datos",id:"3\ufe0f\u20e3-actualizar-la-pantalla-para-usar-los-datos",level:3}];function h(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Hasta ahora la pantalla contiene demasiada informaci\xf3n: adem\xe1s de la interfaz y la l\xf3gica, tambi\xe9n incluye todos los datos de los h\xe9roes. En este apartado se separan dos cosas:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Modelo"}),": una clase para representar un h\xe9roe (",(0,o.jsx)(n.code,{children:"HeroeModel"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Datos"}),": la lista de h\xe9roes en un archivo independiente"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"As\xed la pantalla se limita a mostrar y reaccionar, sin \u201calmacenar\u201d toda la informaci\xf3n."}),"\n",(0,o.jsx)(n.p,{children:"A continuaci\xf3n se detallan los pasos para separar los datos."}),"\n",(0,o.jsxs)(n.h3,{id:"1\ufe0f\u20e3-crear-el-modelo-models",children:["1\ufe0f\u20e3 Crear el modelo (",(0,o.jsx)(n.code,{children:"models/"}),")"]}),"\n",(0,o.jsx)(n.p,{children:"Se define una clase para representar un h\xe9roe con sus campos b\xe1sicos."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Crear lib/models/heroes_model.dart"}),"\n",(0,o.jsx)(n.li,{children:"Definir la clase con sus propiedades (nombre, clase, descripcion, imagePath)"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"2\ufe0f\u20e3-crear-el-archivo-de-datos-data",children:["2\ufe0f\u20e3 Crear el archivo de datos (",(0,o.jsx)(n.code,{children:"data/"}),")"]}),"\n",(0,o.jsx)(n.p,{children:"Se mueve la lista de h\xe9roes fuera de la pantalla para no mezclar UI con datos."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Crear lib/data/heroes_data.dart"}),"\n",(0,o.jsx)(n.li,{children:"Declarar la lista heroes usando el modelo"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"3\ufe0f\u20e3-actualizar-la-pantalla-para-usar-los-datos",children:"3\ufe0f\u20e3 Actualizar la pantalla para usar los datos"}),"\n",(0,o.jsxs)(n.p,{children:["La pantalla recorre la lista ",(0,o.jsx)(n.code,{children:"heroes"})," y genera las tarjetas din\xe1micamente."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Importar heroes_data.dart"}),"\n",(0,o.jsxs)(n.li,{children:["Sustituir ",(0,o.jsx)(n.code,{children:"ListView(children: ...)"})," por ",(0,o.jsx)(n.code,{children:"ListView.builder"})," o ",(0,o.jsx)(n.code,{children:"ListView.separated"})]}),"\n",(0,o.jsxs)(n.li,{children:["Generar cada tarjeta desde ",(0,o.jsx)(n.code,{children:"itemBuilder"})," recorriendo heroes por \xedndice"]}),"\n",(0,o.jsxs)(n.li,{children:["Mantener la llamada a ",(0,o.jsx)(n.code,{children:"heroCard(...)"})," sin cambios"]}),"\n",(0,o.jsxs)(n.li,{children:["Si se usa ",(0,o.jsx)(n.code,{children:"ListView.separated"}),", definir el espaciado entre tarjetas en ",(0,o.jsx)(n.code,{children:"separatorBuilder"})]}),"\n",(0,o.jsx)(n.li,{children:"Ejecutar la app y comprobar que la funcionalidad es la misma"}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{title:"ListView.builder o ListView.separated",type:"tip",children:[(0,o.jsxs)(n.p,{children:["Aunque la aplicaci\xf3n sigue funcionando correctamente con ",(0,o.jsx)(n.code,{children:"ListView(children: ...)"}),", cuando los datos se importan desde un archivo externo se recomienda usar ",(0,o.jsx)(n.code,{children:"ListView.builder"})," o ",(0,o.jsx)(n.code,{children:"ListView.separated"})," porque son el patr\xf3n habitual para listas din\xe1micas y escalables."]}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ListView(children: ...)"})," crea toda la lista de golpe\nFlutter construye todos los widgets desde el inicio, aunque no se vean en pantalla"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ListView.builder"})," crea solo lo necesario\nConstruye los elementos bajo demanda seg\xfan se van mostrando al hacer scroll. Es m\xe1s eficiente cuando la lista crece"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ListView.separated"})," hace lo mismo y adem\xe1s separa el espaciado\nPermite definir el ",(0,o.jsx)(n.code,{children:"SizedBox"})," en un ",(0,o.jsx)(n.code,{children:"separatorBuilder"}),", sin meterlo dentro del listado. El c\xf3digo queda m\xe1s limpio"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Es el patr\xf3n m\xe1s habitual en proyectos reales\nCuando los datos vienen de un archivo externo, una API o una base de datos, lo normal es usar builder o separated"}),"\n"]}),"\n"]})]}),"\n",(0,o.jsxs)(s.A,{children:[(0,o.jsx)(l.A,{value:"paso2",label:"heroes_model.dart",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="lib/models/heroes_model.dart"',children:"class HeroeModel {\n  final String imagePath;\n  final String nombre;\n  final String clase;\n  final String descripcion;\n\n  const HeroeModel({\n    required this.imagePath,\n    required this.nombre,\n    required this.clase,\n    required this.descripcion,\n  });\n}\n"})})}),(0,o.jsx)(l.A,{value:"paso3",label:"heroes_data.dart",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="// lib/data/heroes_data.dart"',children:"import '../models/heroes_model.dart';\n// -----------------------------\n // DATOS (lista de objetos)\n  // -----------------------------\n  final List<HeroeModel> heroes = const [\n    HeroeModel(\n      imagePath: 'assets/images/enano_pixel_128.png',\n      nombre: 'Borin',\n      clase: 'Guerrero',\n      descripcion: 'Un guerrero enano experto en combate cuerpo a cuerpo.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/explorador_pixel_128.png',\n      nombre: 'Marek',\n      clase: 'Explorador',\n      descripcion: 'Rastreador agil, conoce caminos y trampas del bosque.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/exploradora_pixel_128.png',\n      nombre: 'Selene',\n      clase: 'Exploradora',\n      descripcion: 'Exploradora sigilosa, especialista en reconocimiento.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/guerrero_pixel_128.png',\n      nombre: 'Theron',\n      clase: 'Guerrero',\n      descripcion: 'Caballero disciplinado, defiende al grupo en batalla.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/guerrera_pixel_128.png',\n      nombre: 'Ronan',\n      clase: 'Guerrera',\n      descripcion: 'Guerrera valiente, siempre al frente del combate.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/hechicero_pixel_128.png',\n      nombre: 'Arden',\n      clase: 'Mago',\n      descripcion: 'Mago de fuego, domina hechizos ofensivos.',\n    ),\n    HeroeModel(\n      imagePath: 'assets/images/hechicera_pixel_128.png',\n      nombre: 'Liora',\n      clase: 'Maga',\n      descripcion: 'Maga arcana, combina magia y estrategia.',\n    ),\n  ];\n"})})}),(0,o.jsxs)(l.A,{value:"paso4",label:"salon_heroes_screen.dart",children:[(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ListView.separated"})," no \u201crecorre\u201d la lista como un ",(0,o.jsx)(n.code,{children:"for"})," literal, construye autom\xe1ticamente los elementos llamando a ",(0,o.jsx)(n.code,{children:"itemBuilder"})," con ",(0,o.jsx)(n.code,{children:"index"})," desde ",(0,o.jsx)(n.code,{children:"0"})," hasta ",(0,o.jsx)(n.code,{children:"itemCount - 1"}),"."]}),"\n"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="// lib/screens/salon_heroes_screen.dart"',children:"import '../data/heroes_data.dart';\nimport '../models/heroes_model.dart';\n\nclass SalonHeroesScreen extends StatefulWidget {\nconst SalonHeroesScreen({super.key});\n\n@override\nState<SalonHeroesScreen> createState() => \\_SalonHeroesScreenState();\n}\n\nclass \\_SalonHeroesScreenState extends State<SalonHeroesScreen> {\nString heroeSeleccionado = '';\n\n@override\nWidget build(BuildContext context) {\nreturn Scaffold(\nappBar: AppBar(\ntitle: const Text(\n'Sal\xf3n de h\xe9roes',\nstyle: TextStyle(fontWeight: FontWeight.bold),\n),\ncenterTitle: true,\nbackgroundColor: const Color(0xC1035B02),\nforegroundColor: const Color(0xC1FFFFFF),\nactions: [\nIconButton(\nicon: const Icon(Icons.refresh),\ntooltip: 'Limpiar selecci\xf3n',\nonPressed: () {\nsetState(() {\nheroeSeleccionado = '';\n});\n},\n),\n],\n),\nbody: Padding(\npadding: const EdgeInsets.all(16),\nchild: ListView.separated(\n// Numero total de elementos que se van a pintar en la lista\nitemCount: heroes.length,\n\n          // Widget separador entre elementos\n          // Se ejecuta entre cada item y el siguiente (no al final)\n          separatorBuilder: (context, index) => const SizedBox(height: 12),\n\n          // Constructor de cada elemento de la lista\n          // Flutter llama a este builder solo para los items que necesita mostrar\n          itemBuilder: (context, index) {\n            // Se obtiene el heroe correspondiente a la posicion actual\n            final HeroeModel heroe = heroes[index];\n\n            // Se devuelve la tarjeta del heroe usando el componente existente\n            return heroCard(\n              context: context,\n              imagePath: heroe.imagePath,\n              nombre: heroe.nombre,\n              clase: heroe.clase,\n              descripcion: heroe.descripcion,\n              seleccionado: heroeSeleccionado == heroe.nombre,\n            );\n          },\n        ),\n      ),\n    );\n\n}\n\nWidget heroCard({\nrequired BuildContext context,\nrequired String imagePath,\nrequired String nombre,\nrequired String clase,\nrequired String descripcion,\nrequired bool seleccionado,\n}) {\nreturn InkWell(\nonTap: () {\nsetState(() {\nheroeSeleccionado = nombre;\n});\n\n        ScaffoldMessenger.of(\n          context,\n        ).showSnackBar(SnackBar(content: Text(descripcion)));\n      },\n      child: Container(\n        padding: const EdgeInsets.all(12),\n        decoration: BoxDecoration(\n          color: seleccionado ? const Color(0xFFDFF2DF) : Colors.white,\n          borderRadius: BorderRadius.circular(12),\n          border: Border.all(\n            color: const Color(0xC1035B02),\n            width: seleccionado ? 4 : 2,\n          ),\n        ),\n        child: Row(\n          children: [\n            Image.asset(imagePath, width: 64, height: 64),\n            const SizedBox(width: 12),\n            Column(\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                Text(\n                  nombre,\n                  style: const TextStyle(\n                    fontSize: 18,\n                    fontWeight: FontWeight.bold,\n                  ),\n                ),\n                Text(\n                  clase,\n                  style: const TextStyle(fontSize: 14, color: Colors.grey),\n                ),\n              ],\n            ),\n          ],\n        ),\n      ),\n    );\n\n}\n}\n\n"})})]})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},5537:(e,n,a)=>{a.d(n,{A:()=>y});var r=a(6540),o=a(4164),t=a(5627),s=a(6347),l=a(372),i=a(604),d=a(1861),c=a(8749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:a,attributes:r,default:o}}=e;return{value:n,label:a,attributes:r,default:o}}))}(a);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:a}=e;const o=(0,s.W6)(),t=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,i.aZ)(t),(0,r.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(o.location.search);n.set(t,e),o.replace({...o.location,search:n.toString()})}),[t,o])]}function x(e){const{defaultValue:n,queryString:a=!1,groupId:o}=e,t=h(e),[s,i]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:t}))),[d,u]=m({queryString:a,groupId:o}),[x,g]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[o,t]=(0,c.Dv)(a);return[o,(0,r.useCallback)((e=>{a&&t.set(e)}),[a,t])]}({groupId:o}),b=(()=>{const e=d??x;return p({value:e,tabValues:t})?e:null})();(0,l.A)((()=>{b&&i(b)}),[b]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),g(e)}),[u,g,t]),tabValues:t}}var g=a(9136);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=a(4848);function j(e){let{className:n,block:a,selectedValue:r,selectValue:s,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:d}=(0,t.a_)(),c=e=>{const n=e.currentTarget,a=i.indexOf(n),o=l[a].value;o!==r&&(d(n),s(o))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=i.indexOf(e.currentTarget)+1;n=i[a]??i[0];break}case"ArrowLeft":{const a=i.indexOf(e.currentTarget)-1;n=i[a]??i[i.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":a},n),children:l.map((e=>{let{value:n,label:a,attributes:t}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{i.push(e)},onKeyDown:u,onClick:c,...t,className:(0,o.A)("tabs__item",b.tabItem,t?.className,{"tabs__item--active":r===n}),children:a??n},n)}))})}function v(e){let{lazy:n,children:a,selectedValue:t}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function S(e){const n=x(e);return(0,f.jsxs)("div",{className:(0,o.A)("tabs-container",b.tabList),children:[(0,f.jsx)(j,{...n,...e}),(0,f.jsx)(v,{...n,...e})]})}function y(e){const n=(0,g.A)();return(0,f.jsx)(S,{...e,children:u(e.children)},String(n))}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>l});var r=a(6540);const o={},t=r.createContext(o);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:n},e.children)}},9329:(e,n,a)=>{a.d(n,{A:()=>s});a(6540);var r=a(4164);const o={tabItem:"tabItem_Ymn6"};var t=a(4848);function s(e){let{children:n,hidden:a,className:s}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,s),hidden:a,children:n})}}}]);